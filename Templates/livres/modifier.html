<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Modifier livre</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.css') }}">
</head>
<body>

<div class="container mt-4">
    <h4>Modifier un livre</h4>

    <form id="formModifLivre" data-id="{{ livre._id }}">
        <div class="mb-3">
            <label class="form-label">Titre</label>
            <input type="text" name="titre" class="form-control"
                value="{{ livre.titre }}" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Année</label>
            <input type="number" name="annee" class="form-control"
                value="{{ livre.annee }}">
        </div>

        <div class="mb-3">
            <label class="form-label">Auteur</label>
            <select name="auteur_id" class="form-select">
                <option value="">-- Sélectionner un auteur --</option>
                {% for a in auteurs %}
                    <option value="{{ a._id }}"
                        {% if livre.auteurs and a._id = livre.auteurs[0] %}selected{% endif %}>
                        {{ a.nom }} {{ a.prenom }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Nombre d'exemplaires</label>
            <input type="number" name="nbExemplaires" class="form-control"
                value="{{ livre.nbExemplaires }}">
        </div>

        <div class="mb-3">
            <label class="form-label">Catégorie</label>
            <select name="idCategorie" class="form-select">
                <option value="">-- Sélectionner --</option>
                {% for c in categories %}
                    <option value="{{ c._id }}"
                        {% if livre.categorie_id = c._id %}selected{% endif %}>
                        {{ c.libelle }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-warning">Modifier</button>
        <button type="button" class="btn btn-secondary"
                onclick="loadPage('/livres')">Annuler</button>
    </form>

</div>

</body>
</html>
